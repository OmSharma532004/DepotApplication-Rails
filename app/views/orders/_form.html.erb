<%= form_with(model: order, class: "max-w-3xl mx-auto bg-white p-8 rounded-2xl shadow-md space-y-8") do |form| %>

  <% if order.errors.any? %>
    <div id="error_explanation" class="bg-red-50 border border-red-300 text-red-700 px-4 py-3 rounded-lg">
      <h2 class="font-semibold mb-2">
        <%= pluralize(order.errors.count, "error") %> prohibited this order from being saved:
      </h2>
      <ul class="list-disc list-inside text-sm">
        <% order.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- Name -->
  <div>
    <%= form.label :name,t('.name'), class: "block font-medium text-gray-700 mb-1" %>
    <%= form.text_field :name,
          class: "w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm
                 focus:ring-2 focus:ring-green-500 focus:outline-none transition" %>
  </div>

  <!-- Address -->
  <div>
    <%= form.label :address,t('.address_html'), class: "block font-medium text-gray-700 mb-1" %>
    <%= form.text_area :address, rows: 4,
          class: "w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm
                 focus:ring-2 focus:ring-green-500 focus:outline-none transition" %>
  </div>

  <!-- Email -->
  <div>
    <%= form.label :email,t('.email'), class: "block font-medium text-gray-700 mb-1" %>
    <%= form.email_field :email,
          class: "w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm
                 focus:ring-2 focus:ring-green-500 focus:outline-none transition" %>
  </div>

  <!-- Payment Section -->
  <div data-controller="payment" class="space-y-4">
    <div>
      <%= form.label :pay_type, class: "block  font-medium text-gray-700 mb-1" %>
      <%= form.select :pay_type,
       Order.pay_types.keys.map {|key| [t(".pay_types.#{key}"), key] },
            { prompt: 'Select a payment method' },
            {
              'data-payment-target' => 'selection',
              'data-action' => 'payment#showAdditionalFields',
              class: "w-full px-4 py-2 border border-gray-300 rounded-lg bg-white shadow-sm
                      focus:ring-2 focus:ring-green-500 focus:outline-none transition"
            } %>
    </div>

    <!-- Extra payment fields -->
    <%= render partial: 'check', locals: { form: form } %>
    <%= render partial: 'cc', locals: { form: form } %>
    <%= render partial: 'po', locals: { form: form } %>
  </div>

  <!-- Submit -->
  <div>
    <%= form.submit 'Place Order',
          class: "w-full bg-green-600 hover:bg-green-700 text-white font-semibold
                  py-3 rounded-lg shadow-md hover:shadow-lg transition cursor-pointer" %>
  </div>

<% end %>
