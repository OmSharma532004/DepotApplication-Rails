<% content_for :title, "Products" %>

<div class="w-full">
  <% if notice.present? %>
    <p class="py-2 px-4 bg-green-100 mb-6 text-green-700 font-medium rounded-md" id="notice">
      <%= notice %>
    </p>
  <% end %>

  <!-- Page Header -->
  <div class="flex justify-between items-center mb-8">
    <h1 class="font-extrabold text-4xl text-gray-800">Products</h1>
    <%= link_to "New Product",
      new_product_path,
      class: "rounded-lg px-4 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-medium shadow" %>
  </div>

  <!-- Product Grid -->
  <div id="products" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    <% if @products.any? %>
      <% @products.each do |product| %>
        <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition p-5 flex flex-col">

          <!-- Product Image -->
          <div class="w-full h-48 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center mb-4">
            <%= image_tag(product.image_url, alt: product.title, class: "object-cover w-full h-full") if product.image_url.present? %>
          </div>

          <!-- Product Title -->
          <h2 class="font-semibold text-xl text-gray-900 mb-2">
            <%= product.title %>
          </h2>

          <!-- Description -->
          <p class="text-gray-600 text-sm mb-3 line-clamp-3">
            <%= product.description %>
          </p>

          <!-- Price -->
          <p class="text-lg font-bold text-green-700 mb-4">
            <%= number_to_currency(product.price) %>
          </p>

          <!-- Buttons -->
          <div class="mt-auto flex space-x-2">
            <%= link_to "Show",
              product,
              class: "flex-1 text-center rounded-lg px-3 py-2 bg-gray-100 hover:bg-gray-200 font-medium" %>

            <%= link_to "Edit",
              edit_product_path(product),
              class: "flex-1 text-center rounded-lg px-3 py-2 bg-yellow-100 hover:bg-yellow-200 font-medium" %>

            <%= button_to "Delete",
              product,
              method: :delete,
              data: { turbo_confirm: "Are you sure?" },
              class: "flex-1 rounded-lg px-3 py-2 bg-red-600 hover:bg-red-500 text-white font-medium" %>
          </div>

        </div>
      <% end %>
    <% else %>
      <p class="text-center text-gray-500 py-10 text-lg">No products found.</p>
    <% end %>
  </div>
</div>
